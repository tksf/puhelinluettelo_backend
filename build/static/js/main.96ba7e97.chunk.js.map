{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","handleFilterChange","handler","searchFilter","value","onChange","PersonForm","person","newPerson","handleNameChange","nameHandler","handleNumberChange","numberHandler","addName","formHandler","onSubmit","name","number","type","Persons","persons","filter","func","p","toLowerCase","includes","personsToShow","map","i","key","onClick","baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","ErrorNotification","message","className","MessageNotification","App","useState","setPersons","setSearchFilter","errorMessage","setErrorMessage","notificationMessage","setNotificationMessage","useEffect","personService","intialPersons","newName","setNewName","foundPerson","event","target","preventDefault","forEach","window","confirm","replaceObject","returnedPerson","console","log","max","reduce","a","b","Math","nameObject","concat","setTimeout","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.96ba7e97.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = (props) => {\n  // console.log('filterissa')\n\n  const handleFilterChange = props.handler\n  const searchFilter = props.value\n\n  return (\n    <form>\n      <div>\n        filter shown with:\n        <input\n          value={searchFilter}\n          onChange={handleFilterChange}\n        />\n      </div>\n    </form>\n  )\n}\n\nexport default Filter\n","import React from 'react'\n\nconst PersonForm = (props) => {\n\n  const person = props.newPerson\n  const handleNameChange = props.nameHandler\n  const handleNumberChange = props.numberHandler\n  const addName= props.formHandler\n\n  return (\n    <form onSubmit={addName}>\n      <div>\n      name:\n        <input\n          value={person.name}\n          onChange={handleNameChange}\n        />\n      </div>\n      <div>\n      number:\n        <input\n          value={person.number}\n          onChange={handleNumberChange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst personsToShow = (persons, searchFilter) => {\n  // return persons\n  if (searchFilter === '') {\n    return persons\n  } else {\n    return persons.filter(p => p.name.toLowerCase().includes(searchFilter.toLowerCase()))\n  }\n}\n\n\nconst Persons = (props) => {\n  const persons = props.persons\n  const filter = props.filter\n  const func = props.func\n\n  return (\n    <ul>\n      {personsToShow(persons, filter).map((person, i) =>\n        <li key={i}>\n          {person.name} : {person.number}\n          <button onClick={() => func(person)}>delete</button>\n        </li>\n      )}\n    </ul>\n  )\n}\n\nexport default Persons\n\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n// const baseUrl = 'http://localhost:3001/api/persons'\n\n// const getAll = () => {\n// \tconst request = axios.get(baseUrl)\n// \treturn request.then(response => response.data)\n// }\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deleteItem = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (newObject) => {\n  const request = axios.put(`${baseUrl}/${newObject.id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, deleteItem, update }\n","import React from 'react'\n\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst MessageNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"message\">\n      {message}\n    </div>\n  )\n}\n\nexport { ErrorNotification, MessageNotification }\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\nimport { ErrorNotification, MessageNotification } from './components/Notification'\n\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([])\n  const [ searchFilter, setSearchFilter ] = useState('')\n  const [ errorMessage, setErrorMessage] = useState(null)\n  const [ notificationMessage, setNotificationMessage] = useState(null)\n\n  // read directory from \"database\"\n  const hook = () => {\n    // console.log('effect')\n    personService\n      .getAll()\n      .then(intialPersons => {\n        // console.log('promise fulfilled')\n        setPersons(intialPersons)\n      })\n  }\n  useEffect(hook, [])\n  // console.log('render', persons.length, 'persons')\n\n  const [ newName, setNewName ] = useState({\n    name: 'new person here',\n    number: ''\n  })\n\n  let foundPerson = false\n\n  const addName = (event) => {\n    event.preventDefault()\n\n    persons.forEach(p => {\n      if (p.name === newName.name) {\n        foundPerson = true\n        // console.log('already exists, update or not')\n        if (window.confirm(`${newName.name} is already in the phonebook, replace the old number with the new one?`)) {\n\n          const replaceObject = {\n            name: newName.name,\n            number: newName.number,\n            id: p.id,\n          }\n\n          personService\n            .update(replaceObject)\n            .then(returnedPerson => {\n              setPersons(persons.map(p => p.id === replaceObject.id ? replaceObject : p))\n              setNewName({ name:'', number:'' })\n              console.log(returnedPerson)\n            })\n        }\n      }\n    })\n\n    //find maximum index, otherwise inserts will fail if you delete someone from middle at some point\n    let max = persons.reduce( (a, b) => Math.max(a.id, b.id) )\n\n    if (!foundPerson) {\n      const nameObject = {\n        name: newName.name,\n        number: newName.number,\n        id: max + 1,\n      }\n\n      personService\n        .create(nameObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName({ name:'', number:'' })\n          setNotificationMessage(\n            `Added ${returnedPerson.name}`\n          )\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 2000)\n        })\n        .catch(error => {\n          console.log(error.response.data)\n          setErrorMessage(\n            `${error.response.data.error}`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    // console.log(event.target.value)\n    setNewName({ ...newName, name: event.target.value })\n  }\n  const handleNumberChange = (event) => {\n    // console.log(event.target.value)\n    setNewName({ ...newName, number: event.target.value })\n  }\n\n  const handleFilterChange = (event) => {\n    // console.log(event.target.value)\n    setSearchFilter(event.target.value)\n  }\n\n  const deletePerson = ( person ) => {\n    // console.log('in delete', person.id)\n\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      personService\n        .deleteItem(person.id)\n        .then(returnedPerson => {\n          console.log(returnedPerson)\n          setPersons(persons.filter(p => p.id !== person.id))\n        })\n        .catch(error => {\n          console.log(error)\n          setErrorMessage(\n            `Information of '${person.name}' has already been removed from server`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 2000)\n          setPersons(persons.filter(p => p.id !== person.id))\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ErrorNotification message={errorMessage} />\n      <MessageNotification message={notificationMessage} />\n      <Filter value={searchFilter} handler={handleFilterChange} />\n      <h3> Add a new</h3>\n      <PersonForm\n        newPerson={newName}\n        nameHandler={handleNameChange}\n        numberHandler={handleNumberChange}\n        formHandler={addName}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={searchFilter} func={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}